---
title: Creating management solutions in Operations Management Suite (OMS) | Microsoft Docs
description: Management solutions extend the functionality of Operations Management Suite (OMS) by providing packaged management scenarios that customers can add to their OMS workspace.  This article provides details on how you can create management solutions to be used in your own environment or made available to your customers.
services: operations-management-suite
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn

ms.assetid: 1915e204-ba7e-431b-9718-9eb6b4213ad8
ms.service: operations-management-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/17/2017
ms.author: bwren

---
# Designing management solutions in Operations Management Suite (OMS) (Preview)
> [!NOTE]
> This is preliminary documentation for creating management solutions in OMS which are currently in preview. Any schema described below is subject to change.  

Management solutions extend the functionality of Operations Management Suite (OMS) by providing packaged management scenarios that customers can add to their OMS workspace.  

Every management solution has unique requirements, and each one can include any set of Azure resources required to perform a particular management function. This article presents a set of steps  that is suitable for the most common management solutions.  If you are new to building management solutions then you can use this process as a starting point and then leverage the concepts for more complex solutions as your requirements evolve.


## Determine required data
The first step in designing a solution is determining the data that you require.  This data may already be in the Log Analytics repository, or your solution may need to provide the process to collect it.

### Data sources
There are a number of ways that data can be collected in the Log Analytics repository as described in [Data sources in Log Analytics](log-analytics-data-sources.md).  This includes events in the Windows Event Log or generated by Syslog in addition to performance counters for both Windows and Linux clients.  You can also gathered for Azure resources by Azure Monitor.  If you can get the  

Data sources can be [configured with an ARM template](log-analytics-template-workspace-configuration.md), but we do not recommend that you include them in a solution file.  The reason is that configuring data sources is not currently idempotent meaning that your solution could overwrite existing configuration in the user's workspace.  

For example, your solution may require Warning and Error events from the Application event log.  If you specify this as a data source in your solution, you risk removing Information events if the user had this configured in their workspace.  If you included all events, then you may be collecting excessive Information events in the user's workspace.

If your solution requires data from one of the standard data sources, then you should define this as a prerequisite.  State in documentation for your solution that the customer must configure the data source on their own.  You can also add a Data Flow 



   

#### Runbook
If you require data that's not accessible through any of the data sources, then you can use the [HTTP Data Collector API](log-analytics-data-collector-api.md) which allows you to write data to the Log Analytics repository from any client that call all a REST API.  

The most common means of custom data collection in a management solution is to create a [runbook in Azure Automation](automation\automation-runbooks.md) that collects the required data and uses the Data Collector API to write to the repository.  Runbooks are written in PowerShell and can access other services and applications in Azure as well as other clouds.    

You can include a runbook in the solution file so that it's created when the solution is installed.  Contain the runbook in the solution so that it's removed when the solution is removed.

## Author runbooks
Runbooks are used in management solutions to automate processes.  This could include collecting custom monitoring data using the [Log Analytics HTTP Data Collector API]() or XXX.  

In addition to running runbooks in the Azure cloud, you can have them run on  XXX.


## Design log searches
Log searches are used to 

## Define alerts
Alerts notify the user 


## Build a dashboard
Dashboards in Log Analytics are used to visualize data from the Log Analytics repository.  Once you've 







General process: 

- Determine how to get data to Log Analytics (typically done by using fluentd plugins for Linux or the ingestion API more generally)
 - Ingestion API information is here: [https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-data-collector-api](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-data-collector-api) 
 - Linux Open source agent is here, to see how we use fluentd: [https://github.com/Microsoft/OMS-Agent-for-Linux](https://github.com/Microsoft/OMS-Agent-for-Linux)

- Build a dashboard for views, use the export functionality to get the ARM resource representing it
 - https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-view-designer-parts 

- Optionally build any runbooks with Azure Automation
 - Build a solution template containing the dashboard and runbook resources
 - https://docs.microsoft.com/en-us/azure/operations-management-suite/operations-management-suite-solutions-creating 
- Authoring Azure Resource Manager templates: https://azure.microsoft.com/en-us/documentation/articles/resource-group-authoring-templates/ 
 - Useful tooling: Installing and using VS Code for ARM Templates
- Test and iterate




## Other resources
You can get the details and samples of resources that are common to management solutions in the following articles.

* [Views and dashboards](operations-management-suite-solutions-resources-views.md)
* [Automation resources](operations-management-suite-solutions-resources-automation.md)

## Testing a management solution
Prior to deploying your management solution, it is recommended that you test it using [Test-AzureRmResourceGroupDeployment](../azure-resource-manager/resource-group-template-deploy.md#deploy).  This will validate your solution file and help you identify any problems before attempting to deploy it.

## Next steps
* [Add saved searches and alerts](operations-management-suite-solutions-resources-searches-alerts.md) to your management solution.
* [Add views](operations-management-suite-solutions-resources-views.md) to your management solution.
* [Add Automation runbooks and other resources](operations-management-suite-solutions-resources-automation.md) to your management solution.
* Learn the details of [Authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md).
* Search [Azure Quickstart Templates](https://azure.microsoft.com/documentation/templates) for samples of different Resource Manager templates.
