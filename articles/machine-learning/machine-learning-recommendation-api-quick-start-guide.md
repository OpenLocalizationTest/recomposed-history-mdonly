<properties
	pageTitle="Quick start guide: Machine Learning Recommendations API | Microsoft Azure"
	description="Azure Machine Learning Recommendations - Quick Start Guide"
	services="machine-learning"
	documentationCenter=""
	authors="luisca"
	manager="paulettm"
	editor="cgronlun"/>

<tags
	ms.service="machine-learning"
	ms.workload="data-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="03/14/2016"
	ms.author="luisca"/>

<a name="QuickStartTop"></a>
# Quick start guide for the Machine Learning Recommendations API#

This document describes how to onboard your service or application to use the [Recommendations API](http://gallery.cortanaanalytics.com/MachineLearningAPI/Recommendations-2) . 
You can find more details on the Recommendations API in the [Cortana Analytics Gallery](http://gallery.cortanaanalytics.com/MachineLearningAPI/Recommendations-2).

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<a name="Overview"></a>
##General overview

This document is a step-by-step guide. Our objective is to walk you through the steps necessary to train a model, and to point you to resources that will allow you to put it in production.
This exercise will take about 30 minutes.

To use [Recommendations API](http://gallery.cortanaanalytics.com/MachineLearningAPI/Recommendations-2) , you need to take the following steps:

1. Create a model - A model is a container of your usage data, catalog data and the recommendation model.
1. Import catalog data - A catalog contains metadata information on the items.
1. Import usage data - Usage data can be uploaded in one of 2 ways (or both):
  -  By uploading a file that contains the usage data.
  -  Sending data acquisition events.
  Usually you upload a usage file in order to be able to create an initial recommendation model (bootstrap) and use it until the system gathers enough data by using the data acquisition format.
1. Build a recommendation model - This is an asynchronous operation in which the recommendation system takes all the usage data and creates a recommendation model. This operation can take several minutes or several hours depending on the size of the data and the build configuration parameters. When triggering the build, you will get a build ID. Use it to check when the build process has ended before starting to consume recommendations.
1. Consume recommendations - Get recommendations for a specific item or list of items.

##Let's get started!

You will start building a Recommendations model. Then we'll guide you on how to use the results generated by the model to power recommendations on an e-commerce site.

<a name="Ex1Task1"></a>
#### Task 1 - Signing up for the Recommendations API ####

In this task, you'll sign up for the Recommendations API service, and create a recommendations model.

1. You should sign up for the **Recommendations API** service. Go to the **Cortana Analytics Gallery** at [http://gallery.cortanaanalytics.com/](http://gallery.cortanaanalytics.com/) and go to the **Machine Learning APIs** section.

1. Select the **Recommendations API**. Notice the Documentation and Sample links.

1. Click **Sign Up**. This link will take you to the Data Market, where you can sign up for the service.

1. Select a plan. You may select the **free tier for 10,000 transactions/month**. This is a free plan, so it won't require any other information (credit card, etc.) You will need a Microsoft Account to sign up for the service. If you don’t have one, you can create a Microsoft Account at no additional cost.

1. After you sign up for Recommendations, you'll be given an **API Key**. You can always see this key at [https://datamarket.azure.com/account](https://datamarket.azure.com/account). Copy this key, as you'll need it when creating your first model.


<a name="Ex1Task2"></a>
#### Task 2 - Did you bring your data? ####

The Recommendations API will learn from your catalog and your transactions in order to provide good product recommendations. That means you need to feed it with good data about your products (We call this a **catalog** file) and a set of transactions large enough for it to find interesting patterns of consumption (We call this **usage**).

1. Usually you would query your transactions database for these pieces of information.
Just case you don't have them handy, we have provided some sample data for you based on Microsoft Store transaction data.
You can download the data from [here](http://1drv.ms/1HuEqwA). Copy and unpack the MsStoreData.Zip into a folder on your local machine.

1.	Now let’s take a look at the catalog file. On a command prompt navigate to the location where you copied the data.

You will notice that the catalog file is pretty simple. It has the following format 

`<Item Id>,<Item Name>,<Product Category>,[<Product Features>]`

>  AAA-04294,OfficeLangPack 2013 32/64 E34 Online DwnLd,Office <br>
>  AAA-04303,OfficeLangPack 2013 32/64 ET Online DwnLd,Office  <br>
>  C9F-00168,KRUSELL Kiruna Flip Cover for Nokia Lumia 635 - Camel,Accessories

  We should point out that a catalog file can be much richer, as it can support metadata about the products (We call these *item features*). You should see the [catalog format] (https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/#8-catalog) section in the API Reference for more details on the catalog format.

  
1. Let's do the same with the usage data. You will notice that the usage date is of the format 

`<User Id>,<Item Id>[,<Time>,<Event>]`

> 00030000A11B024B,GZA-00202<br>
> 0003BFFD93B934B7,P2W-00004<br>
> 000300009C01C881,W6F-00121<br>
> 00060000AF0D2B04,QR2-00011<br>

This is the minum data required for a valid usage file. A more complex usage file could contain additional information for each transaction, including a timestamp for the transaction and the type of even that occurred ( a click, a purchase, etc.). You can check out the [usage format] (https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/#9-usage-data) for more information on this topic.
    

> **How much data do you need?**  Well, it really depends on the usage data itself. The system learns when users buy different items. For some build like FBT builds, it is important to know which items are purchased in the same transactions. (We call this *co-occurrences*). A good rule of thumb is to have most items be in 20 transactions or more, so if you had 10,000 items in your catalog, we would recommend that you have at least 20 times that number of transactions or about 200,000 transactions.
    Once again, this is a rule of thumb. You will need to experiment with your data.


<a name="Ex1Task3"></a>
#### Task 3 - Creating a recommendations model ####

Now that you have an account and you have data, let's create your first model.

In this task, you have two alternatives to create the recommendations model. You can either use the sample application, or you can use the Recommendations UI.

##### Using the Recommendations UI (Beta) #####

You can set up your model using the [Recommendations UI](http://recommendations.azurewebsites.net/) and following three simple steps:

1. Enter your email address and the API key you got in Task 1 in order to authenticate into the system.

1.	Once you are on the Projects page, create a new project. Type a name for your new project on the text box and click **Add Project** button next to the textbox.

1.	Once the project gets created click on the **Browse for File** button on the **Add a Catalog File** section. Upload the catalog we discussed in Task 2.

1.	After the catalog is uploaded, click on the **Browse for File** button on the **Add Usage Files** section. One by one add the usage files from Task 2.
    
> Note: Usage files need to be at most 200MB files. That said, you can upload more than one file if necessary. The system can hold up to 2GB worth of transaction data. You may not need that much data to generate a good model, it’s not just the size of the data that matters, but the quality of the data. It is very common to see usage data where most of the transactions are just on a handful of very popular items, and there is “little signal” for other items.
    
1. Now you are ready to build a model. Click on the **Build a Model** button.

1. Select **Recommendations** as the build type, notice that we also support a Ranking Build and an FBT (Frequently Bought Together) Build.

1.	Click the **Show Advanced** Link. Note that this allows you to set some advanced build parameters. 
    For now use the default parameters.
    
1.	Click **Build**. The build process will take about 15 minutes, but it could take less or more time depending on the size of your data.

##### Using the Recommendations API #####

1. First of all you should be aware of the [API documentation page](https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/)
1. Download the [sample application] from (https://code.msdn.microsoft.com/Recommendations-144df403) to a local folder.
1. Open in Visual Studio the **RecommendationsSample.sln** solution located in the **C#** folder.
1. Open the **SampleApp.cs** file. Note that the following steps in the file:
- Create a Model
- Add a catalog file
- Add a usage file
- Trigger a build for the Model
- Get a recommendation based on a pair of items

1. Replace the values for the **accountEmail** and **accountKey** fields with your email and the key from Task 1.

1. Run the solution and take note of the **Model Id** that is shown when the application finishes, you'll need it for the following task.

<a name="Ex1Task4"></a>
### Putting your model in production! ###

Now that you understand how to create a model and consume recommendations, the next step is to put it in production on your website, mobile application or integrate into your CRM or ERP system.
Obviously, each of these implementations would be different. Since the Recommendations API are requested as a web-service, you should be able to call it from any of these different environments easily.

**Important:**  If you want to show recommendations from a public client (for instance, your ecommerce site), you should create a proxy server to provide the recommendations. This is important so that your API Key is not exposed to external (potentially untrusted) entities.

Here are a few ideas of locations where you can use Recommendations:

###Product Page###

**Item Recommendations** 
<p>If the model was trained on purchase data, it will allow your customer to *discover products that are likely to be of interest to people that have purchased the source item*.</p>
<p>If the model was trained on click data, it will allow your customer to *discover products that are likely to be visited by people that have visited the source item*. This type of model may return similar items.</p>

**Frequently Bought Together Recommendations**
<p>A frequently bought together build could be trained, so you can get sets of items are likely to be purchased together with this item.</p>

###Check out Page###

**Item Recommendations**
<p>A recommendations model could take as input a list of items. So you could pass all the items in the basket as input to get recommendations.
In this case, the model will provide recommendations that are of interest given all the items in the basket.
</p>

###Landing Page###

**User Recommendations**
<p>
A recommendations model can take as input the user id.  This will use the history of transactions by that user to provide personalized recommendations to the user specified.
</p>


Check out the [Recommendations Consumption Documentation](https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/#12-recommendation).

<a name="Ex1Task5"></a>
### Creating the recommendations virtous cycle ###
<p>Once you have deployed recommendations into you system, you will want to keep your model up to date so it takes into consideration the lastest purchase and consumption trends.
The Recommendations API allows you to send usage events in real time from your client (usually your e-commerce website).</p>

<p>You can send events for the following events:</p>
* Click
* Recommendations click
* Add to shopping cart
* Remove from shopping cart
* Purchase

<p>
Whenever the model is trained again, it will use the new usage data to provide recommendations using the latest consumption patterns. In addition, if you send *recommendations click* events, the system will be able to compute the model *conversion rate* for you.
</p>

See the **Data Acquisition section** in the [Usage Documentation](https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/#9-usage-data)

<a name="Ex1Task6"></a>
###What's next?###
Congratulations if you have made it this far in the getting started guide. To learn more you can visit the complete [Recommendations API documentation](https://azure.microsoft.com/en-us/documentation/articles/machine-learning-recommendation-api-documentation/#9-usage-data).
