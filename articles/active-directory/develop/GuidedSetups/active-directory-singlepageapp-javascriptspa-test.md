---
title: Azure AD v2 JS SPA Guided Setup - Test | Microsoft Docs
description: How JavaScript SPA applications can call an API that require access tokens by Azure Active Directory v2 endpoint
services: active-directory
documentationcenter: dev-center-name
author: andretms
manager: mbaldwin
editor: ''

ms.assetid: 820acdb7-d316-4c3b-8de9-79df48ba3b06
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 06/01/2017
ms.author: andret
---

## Test your code

If you are using Visual Studio, press `F5` to run your project. The browser will open and direct you to *http://localhost:{port}* where you’ll see the *Call Microsoft Graph API* button. 
If you are not using Visual Studio, make sure your web server is started and that the folder containing your JavaScript web application is configured in your web server. Open the browser and type *http://localhost:{port}/path* - where the *port* correspond to the port that your Web Server is listening and *path* is the path for your index.html.

Click *Call Microsoft Graph API* button. If this is the first time, a popup window will show up prompting user to sign-in.
 
![Sample screen shot](media/active-directory-singlepageapp-javascriptspa-test/javascriptspascreenshot1.png)


### Consent
The first time you sign in to your application, you will be presented with a consent screen similar to the below, where you need to explicitly accept:

 ![Consent screen](media/active-directory-singlepageapp-javascriptspa-test/javascriptspaconsent.png)

Because you are querying Graph API, you may see another consent page. This happens due the *dynamic consent* - where a consent is required for each scope requested by the application. For the sample application generated by this guide, the *user.read* scope is provided, and therefore, you need to give the consent for this application to read the user’s profile.

> [!IMPORTANT]
> Currently, due to a known issue with msal javascript, you need to disable the pop-up blocker in browsers like Chrome and Firefox so the *dynamic consent* screen can work properly. Disabling pop-up blocker is required for the first time a user calls Graph API using `acquireTokenPopup`.

### Expected results
You should see user profile information returned by the Microsoft Graph API call Graph API Call Response.
 
 ![Results](media/active-directory-singlepageapp-javascriptspa-test/javascriptsparesults.png)

You will also see basic information about the token acquired in the *Access Token* and *ID Token Claims* boxes.

<!--start-collapse-->
### More information about scopes and delegated permissions

Graph API requires the `user.read` scope to read user profile. This scope is automatically added by default in every application being registered on our registration portal. Some other Graph APIs as well as custom APIs for your backend server require additional scopes. For example, for Graph, `Calendars.Read` is required to list user’s calendars. In order to access the user’s calendar in a context of an application, you need to add `Calendars.Read` delegated application registration’s information and then add `Calendars.Read` to the `AcquireTokenAsync` call. User may be prompted for additional consents as you increase the number of scopes.

If a backend API does not require a scope (not recommended), you can use the `ClientId` as the scope in the `acquireTokenSilent` and/or `acquireTokenPopup` calls.

<!--end-collapse-->
