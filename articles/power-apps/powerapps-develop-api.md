<properties
	pageTitle="Develop API for PowerApps (.Net) | Microsoft Azure"
	description="Develop API for PowerApps (.Net)"
	services="powerapps"
	documentationCenter="" 
	authors="rajram"
	manager="dwrede"
	editor=""/>

<tags
   ms.service="powerapps"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="" 
   ms.date="11/10/2015"
   ms.author="rajram"/>

# Develop an API for PowerApps in .Net

You can create or develop your own API that can be used within PowerApps. The steps include:

- Author your web API
- Generate Swagger for your web API
- Register your Web API

This topic lists these steps. 


## Step 1: Create your web API
Creating an API for PowerApps is just like creating any web API. In Visual Studio,  create a new ASP.Net web application using the API App template.  

To get started, follow the steps in [Create an ASP.NET API app in Azure App Service][1].

> ToDo: Need to update the API App article or author another one to reflect the latest changes

## Step 2: Generate Swagger for your web API
When you create a web API, [Swashbuckle][2] automatically adds a [Swagger][3] file to your project.
>ToDo: Link to API App article for Swashbuckle integration overview

### Schema extensions
In addition to the swagger automatically-generated by Swashbuckle, there are some additional swagger extensions available when creating an API for PowerApps. This section lists and describes these extensions. 

##### x-ms-summary
A string that describes the display names for entities that do not have a summary field defined in the Swagger spec. **Parameter names** is an example. 

##### x-ms-visibility
>ToDo: Define this extension. 

The following values are available: 

- “none” (default)
- “advanced”
- “internal”

For Logic flows, the "important" value is also available. If an operation is marked as "important", the Logic Flow client is expected to highlight these operations.

##### x-ms-notification-url
A boolean value that determines if this field should be populated with the callback URI of the Logic app at runtime.

>ToDo: Logic app? We should state these APIs can be used with PowerApps and Logic Apps. When using with Logic Apps, need to explain why and when we use the callback URI. 

##### x-ms-notification-content
>ToDo: This assumes the developer knows certain things. For example, you state: 
>"This should be present on the paths that support subscriptions."
>What does this sentence mean? "Subscriptions" as in Azure work subscriptions? We need to explain this better. 

This should be present on the paths that support subscriptions. It informs the Logic app what the payload of the notification will be so that the UI can reference the properties of the content.
 
>ToDo: What is the following javascript? Is it an example? What's it doing? We need to explain this. 

```javascript

{ 
    "paths": { 
        "/pet/{petId}/$subscriptions": { 
            "xs-ms-notification-content": { 
                "description": "Pet details on a WebHook", 
                "schema": { 
                    "$ref": "#/definitions/Pet" 
                } 
            }, 
            "get": { 
            }, 
            "post": { 
                "parameters": [ 
                    { 
                        "name": "petId", 
                        "in": "path", 
                        "description": "ID of pet that needs to be subscribed too", 
                        "required": true, 
                        "type": "integer", 
                        "format": "int64" 
                    }, 
                    { 
                        "in": "body", 
                        "description": "Content of the subscription", 
                        "required": true, 
                        "schema": { 
                            "$ref": "#/definitions/SubscriptionRequest" 
                        } 
                    } 
                ], 
                "responses": { 
                    "201": { 
                        "description": "Subscription created", 
                        "schema": { 
                            "type": "object", 
                            "items": { 
                                "$ref": "#/definitions/SubscriptionResponse" 
                            } 
                        } 
                    } 
                } 
            } 

        } 
    }, 
    "definitions": { 
        "SubscriptionRequest": { 
            "type": "object", 
            "properties": { 
                "resource": { 
                    "type": "string" 
                }, 
                "notificationUrl": { 
                    "type": "string", 
                    "description": "The url to call back to", 
                    "x-ms-notification-url" :  true 
                }, 
                "context": { 
                    "type": "string", 
                    "description" :  "Any content to be included in the call" 
                } 
            } 
```




##### x-ms-trigger
Defines whether this operation can be used as a trigger in the client (Logic Flow). Options include:
	
- none (default): The operation cannot be used as a trigger.
- single: This operation can also be used as a trigger.  See the spec above for details.
- batched: This operation can be used as a trigger.  In addition, this operation responds with a JSON  'array' of objects, and the client (Logic Flow) is expected to fire a trigger for each item in the array.  See the spec above for details.

>ToDo: "See the spec above for details."  Which spec?

##### x-ms-dynamic-values
This is a hint to the client (Logic Flow) that the API provides a list of dynamically allowed values for this parameter. The client can invoke an operation as defined by the value of this field, and extract the possible values from the result.  The client can then display these values as options to the end user.  

The value is an object that contains the following properties:
	
- operationId: A string that matches the operationId for the operation that is invoked
- parameters: An object whose properties define the parameters required for the operation
- value-collection: A path string that evaluates to an array of objects in the response payload
- value-path: A path string in the object inside "value-collection" that refers to the value for the parameter.
- value-title: A path string in the object inside "value-collection" that refers to a description for the value.

>ToDo: Explain what this example is doing.

Example:
```javascript

       "/api/tables/{table}/items": {
            "post": {
                "operationId": "TableData_CreateItem",
                "summary": "Create an object in {Salesforce}",
                "parameters": [
                    {
                        "name": "table",
                        "x-ms-summary": "Object Type",
                        "x-ms-dynamic-values": {
                            "operationId": "TableMetadata_ListTables",      // operation that needs to be invoked
                            "parameters": { },                              // parameters for the above operation, if any
                            "value-collection": "values",                   // field that contains the collection
                            "value-path": "Name",                           // field that contains the value
                            "value-title": "DisplayName"                    // field that contains a display name for the value
                        },
```

##### x-ms-dynamic-schema
This is a hint to the client (Logic Flow) that the schema for this parameter (or response) is dynamic in nature.  The client  can invoke an operation as defined by the value of this field, and discover the schema dynamically.  The client can then display an appropriate UI to take inputs from the user or display available fields.  

>ToDo: Explain what this example is doing.

Example:
 
```javascript
{
"name": "item",
"in": "body",
"required": true,
"x-ms-dynamic-schema": {
	"operationId": "Metadata_GetTableSchema",
	"parameters": {
		"tablename": "{table}"              // the value that the user has selected from the above parameter
		},
	"value-path": "Schema"                // the field that contains the JSON schema
},
```

##### x-ms-sample-invoke
This is a hint to the client (PowerApps) that this operation supports a “Try-It” feature.  Allowed values are:

- disable: Disables the Try-It feature.
- enable (default): Enables the Try-It feature.

##### x-ms-sample-value
This is a hint to the client (PowerApps) that this parameter should use the value defined here for the “Try-It” feature.  Its value must be of a valid type as the parameter.

## Step 3: Register your Web API
> ToDo: Link to API App docs for registering web API


<!--References-->
[1]: https://azure.microsoft.com/documentation/articles/app-service-dotnet-create-api-app/
[2]: https://github.com/domaindrivendev/Swashbuckle
[3]: http://swagger.io/
