<properties 
	pageTitle="Controlling Media Service Encoder Output Filenames " 
	description="Learn how to control the encoder output file names." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="06/28/2015" 
	ms.author="juliako"/>


##Controlling Media Service Encoder Output File Names 

By default, the Azure Media Encoder creates output filenames by combining various attributes of the input asset and the encoding process. Each attribute is identified using a macro as discussed below.

The following is a complete list of the macros available for output file naming:
Audio Bitrate - the bitrate used when encoding the audio, specified in kbps

- Audio Codec the codec used for encoding audio, valid values are: AAC, WMA, and DDP
- Channel Count the number of audio channels encoded, valid values are: 1, 2, or 6
- Default extension – the default file extension 
- Language the BCP-47 language code representing the language used in the audio. This currently defaults to “und”. 
- Original File Name the name of the file uploaded into Azure Storage
- StreamId – the stream ID as defined by the streamID attribute of the <StreamInfo> element in the preset file 
- Video Codec the codec used for encoding, valid values are: H264 and VC1
- Video Bitrate the bitrate used when encoding the video, specified in kbps

These macros can be combine in any permutation to control the name of the files generated by the Media Services Encoder. For example, the default naming convention is:

	{Original File Name}_{Video Codec}{Video Bitrate}{Audio Codec}{Language}{Channel Count}{Audio Bitrate}.{Default Extension}

The file naming convention is specified using the DefaultMediaOutputFileName attribute of the [Preset](https://msdn.microsoft.com/library/azure/dn554334.aspx) element. For example:

	<Preset DefaultMediaOutputFileName="{Original file name}{StreamId}_LongOutputFileName{Bit Rate}{Video Codec}{Video Bitrate}{Audio Codec}{Audio Bitrate}{Language}{Channel Count}.{Default extension}"
	  Version="5.0">
	<MediaFile …>
	   <OutputFormat>
	      <MP4OutputFormat StreamCompatibility="Standard">
	         <VideoProfile>
	            <MainH264VideoProfile … >
	               <Streams  AutoSize="False"
	                         FreezeSort="False">
	                  <StreamInfo StreamId="1"
	                              Size="1280, 720">
	                     <Bitrate>
	                       <ConstantBitrate Bitrate="3400"
	                                        IsTwoPass="False"
	                                        BufferWindow="00:00:05" />
	                     </Bitrate>
	                   </StreamInfo>
	                  </Streams>
	               </MainH264VideoProfile>
	            </VideoProfile>
	         </MP4OutputFormat>
	   </OutputFormat>
	</MediaFile>

The encoder will insert underscores between each macro, for example, configuration above would result in a file name like: MyVideo_H264_4500kpbs_AAC_und_ch2_128kbps.mp4.
