<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>mobile-services-client-android.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
body{
    margin: 0 auto;
    font-family: Georgia, Palatino, serif;
    color: #444444;
    line-height: 1;
    max-width: 960px;
    padding: 5px;
}
h1, h2, h3, h4 {
    color: #111111;
    font-weight: 400;
}
h1, h2, h3, h4, h5, p {
    margin-bottom: 16px;
    padding: 0;
}
h1 {
    font-size: 28px;
}
h2 {
    font-size: 22px;
    margin: 20px 0 6px;
}
h3 {
    font-size: 21px;
}
h4 {
    font-size: 18px;
}
h5 {
    font-size: 16px;
}
a {
    color: #0099ff;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}
a:hover {
    text-decoration: none;
    color: #ff6600;
}
a:visited {
    color: purple;
}
ul, ol {
    padding: 0;
    margin: 0;
}
li {
    line-height: 24px;
    margin-left: 44px;
}
li ul, li ul {
    margin-left: 24px;
}
p, ul, ol {
    font-size: 14px;
    line-height: 20px;
    max-width: 540px;
}
pre {
    padding: 0px 24px;
    max-width: 800px;
    white-space: pre-wrap;
}
code {
    font-family: Consolas, Monaco, Andale Mono, monospace;
    line-height: 1.5;
    font-size: 13px;
}
aside {
    display: block;
    float: right;
    width: 390px;
}
blockquote {
    border-left:.5em solid #eee;
    padding: 0 2em;
    margin-left:0;
    max-width: 476px;
}
blockquote  cite {
    font-size:14px;
    line-height:20px;
    color:#bfbfbf;
}
blockquote cite:before {
    content: '\2014 \00A0';
}

blockquote p {  
    color: #666;
    max-width: 460px;
}
hr {
    width: 540px;
    text-align: left;
    margin: 0 auto 0 0;
    color: #999;
}

button,
input,
select,
textarea {
  font-size: 100%;
  margin: 0;
  vertical-align: baseline;
  *vertical-align: middle;
}
button, input {
  line-height: normal;
  *overflow: visible;
}
button::-moz-focus-inner, input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  cursor: pointer;
  -webkit-appearance: button;
}
input[type=checkbox], input[type=radio] {
  cursor: pointer;
}
/* override default chrome & firefox settings */
input:not([type="image"]), textarea {
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

input[type="search"] {
  -webkit-appearance: textfield;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
label,
input,
select,
textarea {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
  font-weight: normal;
  line-height: normal;
  margin-bottom: 18px;
}
input[type=checkbox], input[type=radio] {
  cursor: pointer;
  margin-bottom: 0;
}
input[type=text],
input[type=password],
textarea,
select {
  display: inline-block;
  width: 210px;
  padding: 4px;
  font-size: 13px;
  font-weight: normal;
  line-height: 18px;
  height: 18px;
  color: #808080;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
}
select, input[type=file] {
  height: 27px;
  line-height: 27px;
}
textarea {
  height: auto;
}

/* grey out placeholders */
:-moz-placeholder {
  color: #bfbfbf;
}
::-webkit-input-placeholder {
  color: #bfbfbf;
}

input[type=text],
input[type=password],
select,
textarea {
  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
  -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
  transition: border linear 0.2s, box-shadow linear 0.2s;
  -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}
input[type=text]:focus, input[type=password]:focus, textarea:focus {
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);
  -moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);
}

/* buttons */
button {
  display: inline-block;
  padding: 4px 14px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
  line-height: 18px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  background-color: #0064cd;
  background-repeat: repeat-x;
  background-image: -khtml-gradient(linear, left top, left bottom, from(#049cdb), to(#0064cd));
  background-image: -moz-linear-gradient(top, #049cdb, #0064cd);
  background-image: -ms-linear-gradient(top, #049cdb, #0064cd);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #049cdb), color-stop(100%, #0064cd));
  background-image: -webkit-linear-gradient(top, #049cdb, #0064cd);
  background-image: -o-linear-gradient(top, #049cdb, #0064cd);
  background-image: linear-gradient(top, #049cdb, #0064cd);
  color: #fff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  border: 1px solid #004b9a;
  border-bottom-color: #003f81;
  -webkit-transition: 0.1s linear all;
  -moz-transition: 0.1s linear all;
  transition: 0.1s linear all;
  border-color: #0064cd #0064cd #003f81;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
button:hover {
  color: #fff;
  background-position: 0 -15px;
  text-decoration: none;
}
button:active {
  -webkit-box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
  -moz-box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
  box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
}
button::-moz-focus-inner {
  padding: 0;
  border: 0;
}

/* CSS stylesheet is based on Kevin Burke's Markdown.css project (http://kevinburke.bitbucket.org/markdowncss) */
</style>
</head>
<body>
<p><properties linkid="mobile-services-how-to-Anroid-client" urlDisplayName="Android Client Library" pageTitle="How to use the Android client library - Windows Azure Mobile Services feature guide" metaKeywords="Windows Azure Mobile Services, Mobile Service Android client library, Android client library" metaDescription="Learn how to use the Android client library for Windows Azure Mobile Services." metaCanonical="" disqusComments="1" umbracoNaviHide="0" /></p>

<p><div chunk="../chunks/article-left-menu-Android.md" /></p>

<h1>How to use the Android client library for Mobile Services</h1>

<div class="dev-center-tutorial-selector"> 
    <a href="/en-us/develop/mobile/how-to-guides/how-to-dotnet-client" title=".NET Framework">.NET Framework</a>
    <a href="/en-us/develop/mobile/how-to-guides/how-to-js-client" title="JavaScript">JavaScript</a> 
    <a href="/en-us/develop/mobile/how-to-guides/how-to-ios-client" title="IOS">IOS</a> 
    <a href="/en-us/develop/mobile/how-to-guides/how-to-android-client" title="Android">Android</a>
</div>  

<p>This guide shows you how to perform common scenarios using the Android client for Windows Azure Mobile Services.  The scenarios covered include querying for data; inserting, updating, and deleting data, authenticating users, handling errors, and uploading BLOB data. If you are new to Mobile Services, you should consider first completing the <a href="../tutorials/mobile-services-get-started-XXXXX.md">Mobile Services quickstart</a>. The quickstart tutorial helps you configure your account and create your first mobile service.</p>

<p>The samples are written in Java and require the <a href="http://go.microsoft.com/fwlink/?LinkId=257545">Mobile Services SDK</a>. This tutorial also requires the <a href="https://go.microsoft.com/fwLink/?LinkID=280125&amp;clcid=0x409">Android SDK</a>, which includes the Eclipse integrated development environment (IDE) and Android Developer Tools (ADT) plugin. The Mobile Services SDK supports Android version 2.2 or later, but we recommend building against Android version 4.2 or later.</p>

<h2>Table of Contents</h2>

<ul>
<li><a href="#what-is">What is Mobile Services</a></li>
<li><a href="#concepts">Concepts</a></li>
<li><a href="#create-client">How to: Create the Mobile Services client</a></li>
<li><a href="#instantiating">How to: Create a table reference</a>
<ul>
<li><a href="#api">The API structure</a></li>
</ul></li>
<li><a href="#querying">How to: Query data from a mobile service</a>
<ul>
<li><a href="#filtering">Filter returned data</a></li>
<li><a href="#sorting">Sort returned data</a></li>
<li><a href="#paging">Return data in pages</a></li>
<li><a href="#selecting">Select specific columns</a></li>
<li><a href="#chaining">How to: Concatenate query methods</a></li>
</ul></li>
<li><a href="#inserting">How to: Insert data into a mobile service</a></li>
<li><a href="#updating">How to: Update data in a mobile service</a></li>
<li><a href="#deleting">How to: Delete data in a mobile service</a></li>
<li><a href="#lookup">How to: Look up a specific item</a></li>
<li><a href="#untyped">How to: Work with untyped data</a>
<ul>
<li><a href="#model">The programming model: typed and untyped</a></li>
</ul></li>
<li><a href="#binding">How to: Bind data to the user interface</a>
<ul>
<li><a href="#layout">How to: Define the layout</a></li>
<li><a href="#adapter">How to: Define the adapter</a></li>
<li><a href="#use-adapter">How to: Use the adapter</a></li>
</ul></li>
<li><a href="#authentication">How to: Authenticate users</a>
<ul>
<li><a href="#caching">Cache authentication tokens</a></li>
</ul></li>
<li><a href="#errors">How to: Handle errors</a></li>
<li><a href="#tests">How to: Design unit tests</a></li>
<li><a href="#customizing">How to: Customize the client</a>
<ul>
<li><a href="#headers">Customize request headers</a></li>
<li><a href="#serialization">Customize serialization</a></li>
</ul></li>
<li><a href="#next-steps">Next steps</a></li>
</ul>

<p><div chunk="../chunks/mobile-services-concepts.md" /></p>

<h2><a name="setup"></a><span class="short-header">Setup</span>Setup and Prerequisites</h2>

<p>We assume that you have created a mobile service and a table. For more information see <a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj193162.aspx">Create a table</a>. In the code used in this topic, we assume the table is named <em>ToDoItem</em>, and that it has the following columns:</p>

<ul>
<li>id</li>
<li>text</li>
<li>complete</li>
<li>duration</li>
</ul>

<p>The corresponding typed client side object is the following:</p>

<pre><code>public class ToDoItem {
    private Integer id;
    private String text;
    private Boolean complete;
    private Date due
    private Integer duration;
}
</code></pre>

<p>When dynamic schema is enabled, Windows Azure Mobile Services automatically generates new columns based on the object in the insert or update request. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkId=296271">Dynamic schema</a>.</p>

<h2><a name="create-service"></a><span class="short-header">Create the Mobile Services Client</span>How to: Create the Mobile Services Client</h2>

<p>The following code creates the mobile service client object that is used to access your mobile service. </p>

<pre><code>        mClient = new MobileServiceClient(
                "MobileServiceUrl", // Replace with the above Site URL
                "AppKey",           // replace with the Application Key 
                this)
</code></pre>

<p>In the code above, replace <code>MobileServiceUrl</code> and <code>AppKey</code> with the mobile service URL and application key, in that order. Both of these are available on the Windows Azure Management Portal, by selecting your mobile service and then clicking on "Dashboard".</p>

<h2><a name="instantiating"></a><span class="short-header">Creating a table reference</span>How to: Create a table reference</h2>

<p>The easiest way to query or modify data in the mobile service is by using the <em>typed programming model</em>, since Java is a strongly typed language (later on we will discuss the <em>untyped</em> model). This model provides seamless serialization and deserialization to JSON using the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> library when sending data between the client and the mobile service: the developer doesn't have to do anything, the framework handles it all.</p>

<p>The first thing you do to query or modify data is to create a <a href="http://go.microsoft.com/fwlink/?LinkId=290689">MobileServiceTable</a> object by calling the <strong>getTable</strong> method on the [<strong>MobileServiceClient</strong>] TBD link.  There are two overloads of this method:</p>

<pre><code>public class MobileServiceClient {
    public &lt;E&gt; MobileServiceTable&lt;E&gt; getTable(Class&lt;E&gt; clazz);
    public &lt;E&gt; MobileServiceTable&lt;E&gt; getTable(String name, Class&lt;E&gt; clazz);
}
</code></pre>

<p>In the following code, <em>mClient</em> is a reference to your mobile service client.</p>

<p>The first overload is used where the class name and the table name are the same:</p>

<pre><code>    private MobileServiceTable&lt;ToDoItem&gt; mToDoTable = mClient.getTable(ToDoItem.class);
</code></pre>

<p>The 2nd overload is used when the table name is different from the type name.</p>

<pre><code>    private MobileServiceTable&lt;ToDoItem&gt; mToDoTable = mClient.getTable("ToDoItemBackup", ToDoItem.class);
</code></pre>

<h3><a name="api"></a>The API structure</h3>

<p>All the method calls invoked on a table object follow the callback pattern. One of the parameters to the method is always a callback object. The callback object always contains an <em>onCompleted</em> method. The <em>onCompleted</em> method contains one parameter that is an <em>Exception</em> object, which you can test to determine the success of the method call. A null <em>Exception</em> object indicates success, otherwise the <em>Exception</em> object describes the reason for failure.</p>

<p>There are several different callback objects, and which one you use depends on whether you are querying, modifying, or deleting data. The parameters to the <em>onCompleted</em> method vary, depending on which callback object it is part of.</p>

<h2><a name="querying"></a><span class="short-header">Querying data</span>How to: Query data from a mobile service</h2>

<p>This section describes how to issue queries to the mobile service. Subsections describe diffent aspects such as sorting filtering, paging, and inserts updates and deletes. Finally, we discuss how you can chain these operations together.</p>

<p>The following code returns all items in the <em>ToDoItem</em> table. </p>

<pre><code>    mToDoTable.execute(new TableQueryCallback&lt;ToDoItem&gt;() {
            public void onCompleted(List&lt;ToDoItem&gt; result, int count, Exception exception, ServiceFilterResponse response) {
                if (exception == null) {
                    for (ToDoItem item : result) {
                        Log.i(TAG, "Read object with ID " + item.id);  
                    }
                }
            }
        });
</code></pre>

<p>For queries, the callback object is a <em>TableQueryCallback&lt;E&gt;</em>.</p>

<p>The <em>result</em> parameter returns the result set from the query, and the code inside the success branch of the <em>exception</em> test shows how to parse the individual rows.</p>

<h3><a name="filtering"></a>How to: Filter returned data</h3>

<p>The following code returns all items from the <em>ToDoItem</em> table whose <em>complete</em> field is equal to <em>false</em>. <em>mToDoTable</em> is the reference to the mobile service table that we created previously. </p>

<pre><code>    mToDoTable.where().field("complete").eq(false).execute(new TableQueryCallback&lt;ToDoItem&gt;() {
        public void onCompleted(List&lt;ToDoItem&gt; result, int count, Exception exception, ServiceFilterResponse response) {
            if (exception == null) {
                for (ToDoItem item : result) {
                    Log.i(TAG, "Read object with ID " + item.id);  
                }
            } 
        }
    });
</code></pre>

<p>You start a filter with a <strong><em>where</em></strong> method call on the table reference. This is followed by a <strong><em>field</em></strong> method call followed by a method call that specifies the logical predicate. Possible predicate methods include <strong><em>eq</em></strong>, <strong><em>ne</em></strong>, <strong><em>gt</em></strong>, <strong><em>ge</em></strong>, <strong><em>lt</em></strong>, <strong><em>le</em></strong> etc.</p>

<p>This is sufficient for comparing number and string fields to specific values. But you can do a lot more.</p>

<p>For example, you can filter on dates. You can compare the entire date field, but you can also compare parts of the date, with methods such as <strong><em>year</em></strong>, <strong><em>month</em></strong>, <strong><em>day</em></strong>, <strong><em>hour</em></strong>, <strong><em>minute</em></strong> and <strong><em>second</em></strong>. The following partial code adds a filter for items whose due date is this year.</p>

<pre><code>    mToDoTable.where().year(field("due")).eq(2013)
</code></pre>

<p>You can do a wide variety of complex filters on string fields with methods like <strong><em>startsWith</em></strong>, <strong><em>endsWith</em></strong>, <strong><em>concat</em></strong>, <strong><em>subString</em></strong>, <strong><em>indexOf</em></strong>, <strong><em>replace</em></strong>, <strong><em>toLower</em></strong>, <strong><em>toUpper</em></strong>, <strong><em>trim</em></strong>, and <strong><em>length</em></strong>. The following partial code filters for table rows where the <em>text</em> column starts with "PRI0".</p>

<pre><code>    mToDoTable.where().startsWith("text", "PRI0")
</code></pre>

<p>Number fields also allow a wide variety of more complex filters with methods like <strong><em>add</em></strong>, <strong><em>sub</em></strong>, <strong><em>mul</em></strong>, <strong><em>div</em></strong>, <strong><em>mod</em></strong>, <strong><em>floor</em></strong>, <strong><em>ceiling</em></strong>, and <strong><em>round</em></strong>. The following partial code filters for table rows where the <em>duration</em> is an even number.</p>

<pre><code>    mToDoTable.where().field("duration").mod(0).eq(0)
</code></pre>

<p>You can combine predicates with methods like <strong><em>and</em></strong>, <strong><em>or</em></strong> and <strong><em>not</em></strong>. This partial code combines two of the above examples.</p>

<pre><code>    mToDoTable.where().year(field("due")).eq(2013).and().startsWith("text", "PRI0")
</code></pre>

<p>And you can group and nest logical operators, as shown in this partial code:</p>

<pre><code>    mToDoTable.where()
                .year(field("due")).eq(2013)
                    .and
                (.startsWith("text", "PRI0").or().field("duration").gt(10))
</code></pre>

<p>For more detailed discussion and examples of filtering, see <a href="http://hashtagfail.com/post/46493261719/mobile-services-android-querying" title="The Mobile Services Android client query model">http://hashtagfail.com/post/46493261719/mobile-services-android-querying</a>.</p>

<h3><a name="sorting"></a>How to: Sort returned data</h3>

<p>The following code returns all items from a table of <em>ToDoItems</em> sorted ascending by the <em>text</em> field. <em>mToDoTable</em> is the reference to the mobile mervice table that you created previously.</p>

<pre><code>    mToDoTable.orderBy("text", order.Ascending)
        .execute(new TableQueryCallback&lt;ToDoItem&gt;() { 
            /* same implementation as above */ 
        }); 
</code></pre>

<p>The first parameter of the <strong><em>orderBy</em></strong> function is a string equal to the name of the field on which to sort.</p>

<p>The second parameter uses the <strong><em>order</em></strong> enumeration to specify whether to sort ascending or descending.</p>

<p>Note that if you are filtering using the <strong><em>where</em></strong> function, the <strong><em>where</em></strong> function must be invoked prior to the <strong><em>orderBy</em></strong> function.</p>

<h3><a name="paging"></a>How to: Return data in pages</h3>

<p>The first example shows how to select the top 5 items from a table. The query returns the items from a table of  <em>ToDoItems</em>. <em>mToDoTable</em> is the reference to the mobile service table that you created previously.</p>

<pre><code>    mToDoTable.top(5)
            .execute(new TableQueryCallback&lt;ToDoItem&gt;() {   
            public void onCompleted(List&lt;ToDoItem&gt; result, 
                                    int count,
                                    Exception exception, 
                                    ServiceFilterResponse response) {
                if (exception == null) {
                    for (ToDoItem item : result) {
                        Log.i(TAG, "Read object with ID " + item.id);  
                    }
                } 
            }
        });
</code></pre>

<p>Next, we define a query that skips the first 5 items, and then returns the next 5.</p>

<pre><code>    mToDoTable.skip(5).top(5)
            .execute(new TableQueryCallback&lt;ToDoItem&gt;() {   
            public void onCompleted(List&lt;ToDoItem&gt; result, 
                                    int count,
                                    Exception exception, 
                                    ServiceFilterResponse response) {
                if (exception == null) {
                    for (ToDoItem item : result) {
                        Log.i(TAG, "Read object with ID " + item.id);  
                    }
                } 
            }
        });
</code></pre>

<h3><a name="selecting"></a>How to: Select specific columns</h3>

<p>The following code illustrates how to return all items from a table of  <em>ToDoItems</em>, but only displays the <em>complete</em> and <em>text</em> fields. <em>mToDoTable</em> is the reference to the mobile service table that we created previously.</p>

<pre><code>    mToDoTable.select("complete", "text")
            .execute(new TableQueryCallback&lt;ToDoItem&gt;() { 
                /* same implementation as above */ 
        }); 
</code></pre>

<p>Here the parameters to the select function are the string names of the table's columns that you want to return.</p>

<p>The <a href="http://go.microsoft.com/fwlink/?LinkId=290689"><strong>select</strong></a> method needs to follow methods like <a href="http://go.microsoft.com/fwlink/?LinkId=296296"><strong>where</strong></a> and <a href="http://go.microsoft.com/fwlink/?LinkId=296313"><strong>orderBy</strong></a>, if they are present. It can be followed by methods like <a href="http://dl.windowsazure.com/androiddocs/com/microsoft/windowsazure/mobileservices/MobileServiceTable.html#top(int)"><strong>top</strong></a>.</p>

<h3><a name="chaining"></a>How to: Concatenate query methods</h3>

<p>The methods used in querying mobile mervice tables can be concatenated. This allows you to do things like select specific columns of filtered rows that are sorted and paged. You can create quite complex logical filters.</p>

<p>What makes this work is that the query methods you use return <em>MobileServiceQuery&lt;T&gt;</em> objects, which can in turn have additional methods invoked on them. To end the series of methods and actually run the query, you call the <em>execute</em> method.</p>

<p>Here's a code sample where mToDoTable is a reference to the mobile services ToDoItem table.</p>

<pre><code>    mToDoTable.where().year(field("due")).eq(2013)
                    .and(.startsWith("text", "PRI0").or().field("duration").gt(10))
                .select("id", "complete", "text", "duration")
                .orderBy(duration, order.Ascending).top(20)             
                .execute(new TableQueryCallback&lt;ToDoItem&gt;() { 
                    /* code to execute */ 
            });
</code></pre>

<p>The main requirement in chaining methods together is that the <em>where</em> method and predicates need to come first. After that, you can call subsequent methods in the order that best meets the needs of your application.</p>

<h2><a name="inserting"></a><span class="short-header">Inserting data</span>How to: Insert data into a mobile service</h2>

<p>The following code shows how to insert new rows into a table.</p>

<p>First you instantiate an instance of the ToDoItem class and set its properties.</p>

<pre><code>    ToDoItem mToDoItem = new ToDoItem();
    mToDoItem.text = "Test Program";
    mToDoItem.complete = false;
    mToDoItem.duration = 5.0; /* TBD duration float format */
</code></pre>

<p>Next you call the <em>insert</em> method.</p>

<pre><code>    mToDoTable.insert(mToDoItem, new TableOperationCallback&lt;ToDoItem&gt;() {
        public void onCompleted(ToDoItem entity, Exception exception, ServiceFilterResponse response) { 
            if (exception == null) {
                    Log.i(TAG, "Read object with ID " + entity.id);  
            } 
        }
    });
</code></pre>

<p>For the <em>insert</em> method, the callback object is a <em>TableOperationCallback&lt;ToDoItem&gt;</em> object.</p>

<p>The entity parameter of the <em>onCompleted</em> method contains the newly inserted object. The successful code shows how to access the <em>id</em> of the inserted row.</p>

<h2><a name="updating"></a><span class="short-header">Updating data</span>How to: Update data in a mobile service</h2>

<p>The following code shows how to update data in a table. In this example, <em>mToDoItem</em> is a reference to an item in the <em>ToDoItem</em> table.</p>

<pre><code>    mToDoTable.update(item, new TableOperationCallback&lt;ToDoItem&gt;() {
        public void onCompleted(ToDoItem entity, Exception exception, ServiceFilterResponse response) {
            if (exception == null) {
                    Log.i(TAG, "Read object with ID " + entity.id);  
            } 
        }
    });
</code></pre>

<p>Note that the callback object and <em>onCompleted</em> method's parameters are the same as when we do an insert.</p>

<h2><a name="deleting"></a><span class="short-header">Deleting data</span>How to: Delete data in a mobile service</h2>

<p>The following code shows how to delete data from a table. It deletes an existing item from the ToDoItem table, using a reference to the item, in this case mToDoItem.</p>

<pre><code>    mToDoTable.delete(mToDoItem, new TableDeleteCallback() {
        public void onCompleted(Exception exception, 
                ServiceFilterResponse response) {
            if(exception == null){
                Log.i(TAG, "Object deleted");
            }
        }
    });
</code></pre>

<p>Note that in the <em>delete</em> case, the callback object is a <em>TableDeleteCallback</em> and the <em>onCompleted</em> method is somewhat different in that no table row is returned.</p>

<p>The following code illustrates another way to do this. It deletes an existing item in the ToDoItem table by specifying the value of the id field of the row to delete (assumed to equal "5"). </p>

<pre><code>    mToDoTable.delete(5, new TableDeleteCallback() {
        public void onCompleted(Exception exception, 
                ServiceFilterResponse response) {
            if(exception == null){
                Log.i(TAG, "Object deleted");
            }
        }
    });
</code></pre>

<h2><a name="lookup"></a><span class="short-header">Looking up data</span>How to: Look up a specific item</h2>

<p>Sometimes you want to look up a specific item by its <em>Id</em>, unlike querying where you typically get a collection of items that satisfy some criteria. The following code shows how to do this, for id = 23.</p>

<pre><code>    mToDoTable.lookUp(23, new TableOperationCallback&lt;ToDoItem&gt;() {
        public void onCompleted(item entity, Exception exception,
                ServiceFilterResponse response) {
            if(exception == null){
                Log.i(TAG, "Read object with ID " + entity.id);    
            }
        }
    });
</code></pre>

<h2><a name="untyped"></a><span class="short-header">Working with untyped data</span>How to: Work with untyped data</h2>

<p>The untyped programming model gives you exact control over the JSON serialization, and there are some scenarios where you may wish to use it, for example, if your mobile service table contains a large number of columns and you only need to reference a few of them. Using the typed model requires you to define all of the movile service table's columns in your data class. But with the untyped model you only define the columns you need to use.</p>

<p>Similar to the typed model, you start by getting a table reference, but in this case it's a <a href="http://go.microsoft.com/fwlink/?LinkId=290689">MobileServicesJsonTable</a> object. You get the reference by calling the <a href="http://go.microsoft.com/fwlink/?LinkId=290689">getTable()</a> method on an instance of the Mobile Services client.</p>

<p>You use the following overload of this method, which is used for working with the untyped JSON-based programming models:</p>

<pre><code>    public class MobileServiceClient {
        public MobileServiceJsonTable getTable(String name);
    }
</code></pre>

<p>Most of the API calls for accessing data are similar to the typed programming calls. The main difference is that in the untyped model you invoke methods on the <em>MobileServiceJsonTable</em> object, instead of the <em>MobileServiceTable</em> object. Usage of the callback object and the <em>onCompleted</em> method is very similar to the typed model.</p>

<h3><a name="json_instance"></a>How to: Create an instance of an untyped table</h3>

<p>Once you create an instance of the Mobile Services client (here, the <em>mClient</em> variable), you next create an instance of a <em>MobileServiceJsonTable</em>, with the following code.</p>

<pre><code>    private MobileServiceJsonTable mTable = mClient.getTable("ToDoItem");
</code></pre>

<p>Once you have created an instance of the <em>MobileServiceJsonTable</em>, you can call almost all of the methods on it that you can with the typed programming model. However in some cases the methods take an untyped parameter, as we see in the following examples.</p>

<h3><a name="json_insert"></a>How to: Insert into an untyped table</h3>

<p>The following code shows how to do an insert. The first step is to create a <strong>JsonObject</strong>, which is part of the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> library.</p>

<pre><code>    JsonObject task = new JsonObject();
    task.addProperty("text", "Wake up");
    task.addProperty("complete", false);
    task.addProperty("duration", 5);
</code></pre>

<p>The next step is to insert the object. The callback function passed to the <strong>insert</strong> method is an instance of the <strong>TableJsonOperationCallback</strong> class. Note how the first parameter of the <em>onCompleted</em> method is a JsonObject.</p>

<pre><code>    mTable.insert(task, new TableJsonOperationCallback() {
        public void onCompleted(JsonObject jsonObject, Exception exception,
                ServiceFilterResponse response) {
            if(exception == null){
                Log.i(TAG, "Object inserted with ID " + 
            jsonObject.getAsJsonPrimitive("id").getAsInt());
            }
        }
    });
</code></pre>

<p>Note how we get the ID of the inserted object with this method call:</p>

<pre><code>            jsonObject.getAsJsonPrimitive("id").getAsInt());
</code></pre>

<h3><a name="json_delete"></a>How to: Delete from an untyped table</h3>

<p>The following code shows how to delete an instance, in this case, the same instance of a <strong>JsonObject</strong> that was created in the prior <em>insert</em> example. Note the callback method is <strong>TableDeleteCallback()</strong> and the <strong>onCompleted</strong> method has a different signature.</p>

<pre><code>    mTable.delete(task, new TableDeleteCallback() {
        public void onCompleted(Exception exception, ServiceFilterResponse response) {
            if(exception == null){
                Log.i(TAG, "Object deleted");
            }
        }
    });
</code></pre>

<p>You can also delete an instance directly by using its ID: </p>

<pre><code>    mTable.delete(task.getAsJsonPrimitive("id").getAsInt(), ...)
</code></pre>

<h3><a name="json_get"></a>How to: Return all rows from an untyped table</h3>

<p>The following code shows how to retrieve an entire table. Note the different callback object used with the <strong>execute</strong> method: <strong>TableJsonQueryCallback</strong>.</p>

<pre><code>    mTable.execute(new TableJsonQueryCallback() {
        public void onCompleted(JsonElement result, int count, Exception exception,
                ServiceFilterResponse response) {
            if(exception == null){
                JsonArray results = result.getAsJsonArray();
                for(JsonElement item : results){
                    Log.i(TAG, "Read object with ID " + 
                item.getAsJsonObject().getAsJsonPrimitive("id").getAsInt());
                }
            }
        }
    });
</code></pre>

<p>You can do filtering, sorting and paging by concatenating the same methods that were used in the typed programming model.</p>

<h2><a name="binding"></a><span class="short-header">Binding data</span>How to: Bind data to the user interface</h2>

<p>Data binding involves three components:</p>

<ul>
<li>the data source</li>
<li>the screen layout</li>
<li>and the adapter that ties the two together.</li>
</ul>

<p>In our sample code, we return the data from the mobile service table <em>ToDoItem</em> into an array. This is one very common pattern for data applications: database queries typically return a collection of rows which the client gets in a list or array. In this sample the array is the data source. </p>

<p>The code specifies a screen layout that defines the view of the data that will appear on the device. </p>

<p>And the two are bound together with an adapter, which in this code is an extension of the <em>ArrayAdapter&lt;ToDoItem&gt;</em> class.</p>

<h3><a name="layout"></a>How to: Define the Layout</h3>

<p>The layout is defined by several snippets of XML code. The following code is contained in the file that  describes the page overall, and this code specifies the ListView that will display the data.</p>

<pre><code>    &lt;ListView
        android:id="@+id/listViewToDo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:listitem="@layout/row_list_to_do" 
        android:padding="6dip" &gt;
    &lt;/ListView&gt;
</code></pre>

<p>In the above code the <em>listitem</em> attribute specifies the id of the layout for an individual row in the list. Here is that code, which specifies a check boxe and its associated text. This gets instantiated once for each item in the list. A more complex layout would specify additional fields in the display.</p>

<pre><code>    &lt;?xml version="1.0" encoding="utf-8"?&gt;
    &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"&gt;           
        &lt;CheckBox
            android:id="@+id/checkToDoItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/checkbox_text" /&gt;
    &lt;/LinearLayout&gt;
</code></pre>

<p>We associate the top level layout with the Activity via the <em>setContentView</em> method in the <em>onCreate</em> method of the <em>Activity</em> class.</p>

<pre><code>    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_to_do);
</code></pre>

<h3><a name="adapter"></a>How to: Define the adapter</h3>

<p>Since the data source for our view is an array, we subclass our adapter from the <em>AdapterView</em> class. This subclass will use an <em>Adapter</em> object to actually retrieve the data from the database query, and converts each item retrieved into a view that is added to the <em>AdapterView</em> layout.</p>

<p>In our code we define the following class which is an extension of the <em>ArrayAdapter&lt;E&gt;</em> class:</p>

<pre><code>    public class ToDoItemAdapter extends ArrayAdapter&lt;ToDoItem&gt; {
</code></pre>

<p>You must override the adapter's <em>getView</em> method. This sample code is one example of how to do this: details will vary with your application.</p>

<pre><code>public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    final ToDoItem currentItem = getItem(position);

    if (row == null) {
        LayoutInflater inflater = ((Activity) mContext).getLayoutInflater();
        row = inflater.inflate(mLayoutResourceId, parent, false);
    }

    row.setTag(currentItem);

    /* This code is specific to this particular example */
    final CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkToDoItem);
    checkBox.setText(currentItem.getText());
    checkBox.setChecked(false);
    checkBox.setEnabled(true);

    checkBox.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (checkBox.isChecked()) {
                checkBox.setEnabled(false);
                if (mContext instanceof ToDoActivity) {
                    ToDoActivity activity = (ToDoActivity) mContext;
                    activity.checkItem(currentItem);
                }
            }
        }
    });

    return row;
}
</code></pre>

<p>We create an instance of this class in our Activity as follows:</p>

<pre><code>    private ToDoItemAdapter mAdapter;
    mAdapter = new ToDoItemAdapter(this, R.layout.row_list_to_do);
</code></pre>

<p>Note that the second parameter to the ToDoItemAdapter constructor is a reference to the layout. The call to the constructor is followed by the following code which first gets a reference to the <strong>ListView</strong>, and next calls <em>setAdapter</em> to configure itself to use the adapter we just created:</p>

<pre><code>    ListView listViewToDo = (ListView) findViewById(R.id.listViewToDo);
    listViewToDo.setAdapter(mAdapter);
</code></pre>

<h3><a name="use-adapter"></a>How to: Use the adapter</h3>

<p>You are now ready to use data binding. The following code shows how to get the items in the mobile service table, clear the apapter, and then call the adapter's <em>add</em> method to fill it with the returned items.</p>

<pre><code>    mToDoTable.execute(new TableQueryCallback&lt;ToDoItem&gt;() {
        public void onCompleted(List&lt;ToDoItem&gt; result, int count, Exception exception, ServiceFilterResponse response) {
            if (exception == null) {
                mAdapter.clear();
                for (ToDoItem item : result) {
                    mAdapter.add(item);
                }
            } 
        }
    });
</code></pre>

<p>You must also call the adapter any time you modify the <em>ToDoItem</em> table if you want to display the results of doing that. Since modifications are done on a record by record basis, you will be dealing with a single row instead of a collection. When you insert an item you call the <em>add</em> method on the adapter, when deleting, you call the <em>remove</em> method.</p>

<h2><a name="authentication"></a><span class="short-header">Authentication</span>How to: Authenticate users</h2>

<p>Mobile Services supports authenticating and authorizing app users using a variety of external identity providers: Facebook, Google, Microsoft Account, and Twitter. You can set permissions on tables to restrict access for specific operations to only authenticated users. You can also use the identity of authenticated users to implement authorization rules in server scripts. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkId=296316">Get started with authentication</a>.</p>

<p>Two authentication flows are supported: a <em>server</em> flow and a <em>client</em> flow. The server flow provides the simplest authentication experience, as it relies on the provider’s web authentication interface. The client flow allows for deeper integration with device-specific capabilities such as single-sign-on as it relies on provider-specific device-specific SDKs.</p>

<p>Three steps are required to enable authentication in your app:</p>

<ol>
<li>Register your app for authentication with a provider, and configure Mobile Services</li>
<li>Restrict table permissions to authenticated users only</li>
<li>Add authentication code to your app</li>
</ol>

<p>Mobile Services supports the following existing identity providers that you can use to authenticate users:</p>

<ul>
<li>Facebook</li>
<li>Google </li>
<li>Microsoft Account</li>
<li>Twitter</li>
</ul>

<p>You can set permissions on tables to restrict access for specific operations to only authenticated users. You can also use the ID of an authenticated user to modify requests. </p>

<p>These first two tasks are done using the <a href="https://manage.windowsazure.com/">Windows Azure Management Portal</a>. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkId=296316">Get started with authentication</a>.</p>

<h3><a name="caching"></a>How to: Add authentication code to your app</h3>

<ol>
<li><p>Add the following import statements to your app's activity file.</p>

<pre><code>import com.microsoft.windowsazure.mobileservices.MobileServiceUser;
import com.microsoft.windowsazure.mobileservices.MobileServiceAuthenticationProvider;
import com.microsoft.windowsazure.mobileservices.UserAuthenticationCallback;
</code></pre></li>
<li><p>In the <strong>onCreate</strong> method of the activity class, add the following line of code after the code that creates the <code>MobileServiceClient</code> object: we assume that the reference to the <code>MobileServiceClient</code> object is <em>mClient</em>.</p>

<pre><code>    // Login using the Google provider.
    mClient.login(MobileServiceAuthenticationProvider.Google,
            new UserAuthenticationCallback() {
                @Override
                public void onCompleted(MobileServiceUser user,
                        Exception exception, ServiceFilterResponse response) {  
                    if (exception == null) {
                        createAndShowDialog(String.format(
                                        "You are now logged in - %1$2s",
                                        user.getUserId()), "Success");
                        /* code to create table reference and refresh ui goes here */
                    } else {
                        createAndShowDialog("You must log in. Login Required", "Error");
                    }
                }
            });
</code></pre>

<p>This code authenticates the user using a Google login. A dialog is displayed which displays the ID of the authenticated user. You cannot proceed without a positive authentication.</p>

<div class="dev-callout"><b>Note</b>
<p>If you are using an identity provider other than Google, change the value passed to the <strong>login</strong> method above to one of the following: <i>MicrosoftAccount</i>, <i>Facebook</i>, or <i>Twitter</i>.</p>
</div></li>
<li><p>When you run the app, sign in with your chosen identity provider. </p></li>
</ol>

<h3><a name="caching"></a>How to: Cache authentication tokens</h3>

<p>This section shows how to cache an authentication token. Do this to prevent users from having to authenticate again if app is "hibernated" while the token is still vaid.</p>

<p>To do this you must store the User ID and authentication token locally on the device. The next time the app starts, you check the cache, and if these values are present, you can skip the login procedure and rehydrate the client with this data. However this data is sensitive, and it should be stored encrypted for safety in case the phone gets stolen.</p>

<p>So what happens if your token expires? In this case, when you try to use it to connect, you will get a <em>401 unauthorized</em> response. The user must then log in to obtain new tokens. You can avoid having to write code to handle this in every place in your app that calls Mobile Servides by using filters, which allow you to intercept calls to and responses from Mobile Services. The filter code will then test the response for a 401, trigger the login process if needed, and then resume the request that generated the 401.</p>

<h2><a name="errors"></a><span class="short-header">Error handling</span>How to: Handle errors</h2>

<p>Here is one way you might provide a <em>global</em> error handler.</p>

<p>The code we've seen that accesses the mobile service table has involved three different callback objects:</p>

<ul>
<li>TableQueryCallback / TableQueryJsonCallback</li>
<li>TableOperationCallback / TableJsonOperationCallback</li>
<li>TableDeleteCallback / TableJsonDeleteCallback</li>
</ul>

<p>Each of these has an <em>OnCompleted</em> method where the second parameter is a <strong>java.lang.Exception</strong> object. You can subclass these callback objects and implement your own <em>onCompleted</em> method that checks if the exception parameter is null. If so, there is no error, and you just call  <b>super.OnCompleted()</b>.</p>

<p>If the <strong>Exception</strong> object is not null, perform some generic error handling.</p>

<ol>
        <li>You may wish to display information about the exception along with some general text.</li>
        <li>The most informative exception error information will be in these properties, where e is the reference to the exception.
    <ul>
        <li> <b>e.Response.Content</b></li>
        <li> <b>e.Response.StatusDescription</b></li>
        <li><b>e.Response.StatusCode</b></li> 
    </ul>
</ol>

<p>You can see an example <a href="https://www.windowsazure.com/en-us/develop/mobile/tutorials/validate-modify-and-augment-data-dotnet/" target="_blank">here</a>.</p>

<p>Now the developer can use their subclassed callbacks and not worry about checking the exception, because it is handled in one central place (#2) for all instances of the callback.</p>

<h2><a name="tests"></a><span class="short-header">Designing tests</span>How to: Design unit tests</h2>

<p><em>(Optional) This section shows how to write unit tests when using the client library (info from Yavor).</em></p>

<h2><a name="customizing"></a><span class="short-header">Customizing the client</span>How to: Customize the client</h2>

<p><em>(Optional) This section shows how to send customized client behaviors.</em></p>

<h3><a name="headers"></a>How to: Customize request headers</h3>

<p><em>(Optional) This section shows how to send custom request headers.</em></p>

<p>For more information see, New topic about processing headers in the server-side. TBD: where is this??</p>

<p>Hook up a ServiceFilter like this:</p>

<pre><code>    client = client.withFilter(new ServiceFilter() {

        @Override
        public void handleRequest(ServiceFilterRequest request, NextServiceFilterCallback nextServiceFilterCallback,
            ServiceFilterResponseCallback responseCallback) {

            // Do stuff to request object

            nextServiceFilterCallback.onNext(request, responseCallback);
        }
    });
</code></pre>

<p>Inside the method show calling <code>request.addHeader</code>.</p>

<h3><a name="serialization"></a>How to: Customize serialization</h3>

<p><em>(Optional) This section shows how to use attributes to customize how data types are serialized.</em></p>

<p>Mobile Services assumes by default that the table names, column names and data types on the server all match exactly what is on the client. But there can be any number of reasons why the server and client names might not match. One example might be if you have an existing client that you want to change so that it uses Windows Azure Mobile Services instead of a compettitor's product.</p>

<p>You might want to do the following kinds of customizations:</p>

<ul>
<li>
The column names used in the mobile service table don't match the names you are using in the client</li>

<li>Use a mobile service table that has a different name than the class it maps to in the client</li>
<li>Turn on automatic property capitalization</li>

<li>Add complex properties to an object</li>

</ul>

<h3><a name="columns"></a>How to: Map different client and server names</h3>

<p>Suppose that your Java client code uses standard Java-style names for the <em>ToDoItem</em> object properties, such as the following. </p>

<ul>
<li>mId</li>
<li>mText</li>
<li>mComplete</li>
<li>mDuration</li>

</ul>

<p>You must serialize the client names into JSON names that match the column names of the <em>ToDoItem</em> table on the server. The following code, which makes use of the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> library does this.</p>

<pre><code>@com.google.gson.annotations.SerializedName("text")
private String mText;

@com.google.gson.annotations.SerializedName("id")
private int mId;

@com.google.gson.annotations.SerializedName("complete")
private boolean mComplete;

@com.google.gson.annotations.SerializedName("duration")
private String mDuration;
</code></pre>

<h3><a name="table"></a>How to: Map different table names between client and mobile services</h3>

<p>Mapping the client table name to a different mobile services table name is easy, we just use one of the overrides of the
<a href="http://go.microsoft.com/fwlink/?LinkId=290689" target="_blank">getTable()</a> function, as seen in the following code.</p>

<pre><code>    mToDoTable = mClient.getTable("ToDoItemBackup", ToDoItem.class);
</code></pre>

<h3><a name="conversions"></a>How to: Automate column name mappings</h3>

<p>Mapping column names for a narrow table with only a few columns isn't a big deal, as we saw in the prior section. But suppose our table has a lot of columns, say 20 or 30. It turns out that we can call the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> API and specify a conversion strategy that will apply to every column, and avoid having to annotate every single column name.</p>

<p>To do this we use the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> library which the Android client library uses behind the scenes to serialize Java objects to JSON data, which is sent to Windows Azure Mobile Services. {TBD: this needs to be explained better and earlier}</p>

<p>The following code uses the <em>setFieldNamingStrategy()</em> method, in which we define a <em>FieldNamingStrategy()</em> method. This method says to delete the initial character (an "m"), and then lower-case the next character, for every field name. This code also enables pretty-printing of the output JSON.</p>

<pre><code>client.setGsonBuilder(
    MobileServiceClient
    .createMobileServiceGsonBuilder()
    .setFieldNamingStrategy(new FieldNamingStrategy() {
        public String translateName(Field field) {
            String name = field.getName();
            return Character.toLowerCase(name.charAt(1))
                + name.substring(2);
            }
        })
        .setPrettyPrinting());
</code></pre>

<p>This code must be executed prior to any method calls on the Mobile Services client object.</p>

<h3><a name="complex"></a>How to: Store an object or array property into a table</h3>

<p>So far all of our serialization examples have involved primitive types such as integers and strings which easily serialize into JSON and into the mobile services table. Suppose we want to add a complex object to our client type, which doesn't automatically serialize to JSON and to the table. For example we might want to add an array of strings to the client object. It is now up to us to specify how to do the serialization, and how to store the array into the mobile services table.</p>

<p>To see an example of how to do this, check out the blog post <a href="http://hashtagfail.com/post/44606137082/mobile-services-android-serialization-gson" target="_blank">Customizing serialization using the <a href=" http://go.microsoft.com/fwlink/?LinkId=290801" target="_blank">gson</a> library in the Mobile Services Android client</a>.</p>

<p>This general method can be used whenever we have a complex object that is not automatically serializable into JSON and the mobile services table.</p>

<h2><a name="next-steps"></a>Next steps</h2>

<p>The Javadocs reference for the Android client API is at <a href="http://go.microsoft.com/fwlink/?LinkId=290689" title="here">http://go.microsoft.com/fwlink/?LinkId=290689</a></p>

<!-- Anchors. -->

<p><!-- Images. -->
<!-- URLs. --></p>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->