<html>
    <head>
        <title></title>
    </head>
    <body>
<!-- http://go.microsoft.com/fwlink/?LinkId=251824 -->

<p><div chunk="../chunks/article-left-menu.md" /></p>

<h1>Troubleshooting a Web Site</h1>

<p>Troubleshooting a web site is accomplished by configuring the web site to display application errors, configuring the web site to display environment variables, enabling web site diagnostics, and then analyzing web site application errors and diagnostic data to identify and resolve problems. This tutorial walks you through the process of creating and deploying a simple web site to Windows Azure, causing an error condition on the web site and then  applying configuration and logging options to generate troubleshooting data that can be analyzed to identify and resolve the error.</p>

<div class="dev-callout"> 
<b>Note</b> 
<p>For purposes of this document, <b>Web Site</b> refers to the host for a web application running on Windows Azure, and <b>web site</b> refers to a running host instance.</p> 
</div>

<h2>What is Web Site Diagnostics?</h2>

<p>Web Site diagnostics provides the following logging and tracing options:</p>

<ul>
<li><strong>Detailed Error Logging</strong> - Logs all errors generated by a web site.</li>
<li><strong>Failed Request Tracing</strong> - Logs all failed client requests to a web site.</li>
<li><strong>Web Server Logging</strong> - Logs all HTTP transactions on a web site using the <a href="http://go.microsoft.com/fwlink/?LinkID=90561">W3C extended log file format</a>. </li>
</ul>

<p>Diagnostics log files are saved to an FTP site for download to a local computer. </p>

<h2>Concepts</h2>

<p>Concepts introduced in this article include:</p>

<ul>
<li><strong>Web Site development</strong> - Install and use Microsoft WebMatrix on a local computer to create a web site.</li>
<li><strong>Creating and managing Web Sites on Windows Azure</strong> - Using the Windows Azure Management portal to create and configure a web site.</li>
<li><strong>Web Site deployment</strong> - Deploying a web site from a local computer to Windows Azure.</li>
<li><strong>Troubleshooting Web Sites using configuration options and diagnostics</strong> - Configuring web sites to display application errors and environment variables, configuring diagnostics for a web site, collecting diagnostic data and then analyzing the displayed application errors and diagnostics data to troubleshoot and resolve problems.</li>
</ul>

<h2>Install developer tools and create a web site on your local computer</h2>

<p>Before discussing how to troubleshoot a web site, we must first create a web site. This section walks through using Microsoft WebMatrix to create a simple web site and deploy the web site to Windows Azure.</p>

<h3><a name="installwebmatrix"></a>Install Microsoft WebMatrix</h3>

<p>Visit <a href="http://go.microsoft.com/fwlink/?LinkId=251418">http://www.microsoft.com/web/webmatrix</a> and click the <strong>Free Download</strong> button.  This will run the Web Platform Installer which installs all the dependencies you need to run WebMatrix and then install WebMatrix.</p>

<h3><a name="createlocalsite"></a>Create a Web Site on your local computer with WebMatrix</h3>

<p>To create a web site with WebMatrix follow these steps:</p>

<ol>
<li>Click <b>Start</b>, <b>All Programs</b>, <b>Microsoft WebMatrix</b> and then click <b>Microsoft WebMatrix</b> to display the WebMatrix Quick Start screen.</li>
<li>Click <b>Templates</b> to display the available templates.</li>
<li><p>Select the <b>Starter Site</b> template, enter a value (e.g. <b>AzureWebDiag</b>) for the Site Name and then click <b>Next</b>.</p>

<p><img src="..\Media\tshootSiteFromTemplate.png" alt="Create new site from a template" /></p>

<p>If the site is created successfully it will be opened for editing in the WebMatrix IDE:</p>

<p><img src="..\Media\tshootWebMatrixIDE.png" alt="New web site opened in WebMatrix IDE" /></p></li>
<li><p>Verify that an instance of the web site is running on your computer by clicking the URL for the site displayed in the WebMatrix IDE. Your browser should then display the default page for the web site:</p>

<p><img src="..\Media\tshootDefaultWebPage.png" alt="Default web page of web site" /></p></li>
</ol>

<p>You have now successfully created a web site with WebMatrix.</p>

<h2>Create a Web Site on Windows Azure</h2>

<p>Before you can deploy your web site from WebMatrix to Windows Azure, you must first create a web site on Windows Azure. This section walks through creating a web site on Windows Azure.</p>

<h3><a name="quickcreateazurewebsite"></a>'Quick Create' a new Web Site on Windows Azure</h3>

<ol>
<li>Connect to the <a href="https://manage.windowsazure.com">Windows Azure Portal</a> and click <strong>New</strong>, <strong>Web Site</strong>, <strong>Quick Create</strong>.</li>
<li><p>Enter a name for the URL (e.g. AzureWebDiag), select an appropriate Region, and then click <strong>Create Web Site</strong>. </p>

<p><img src="..\Media\tshootCreateAzureWebSite.png" alt="Create a new web site" /></p></li>
<li><p>After the web site has been created, click the name of the web site as it is listed in the <strong>Name</strong> column of the Windows Azure portal's web sites page. This will open the <strong>Quick Start</strong> management page for the web site:</p>

<p><img src="..\Media\tshootAzureWebDiagQuickStart.png" alt="QuickStart management page" /></p></li>
</ol>

<h3><a name="deploymentuser"></a>Create deployment user credentials</h3>

<p>Web Sites support multiple deployment technologies including MSDeploy/Web Deploy, TFS, FTP, FTPS, and GIT. This tutorial will describe how to use FTP to deploy a web site from your developer computer to Windows Azure.  Both GIT and FTP deployment require authentication with specific <strong>deployment user</strong> credentials that you generate from the web site management pages. If you have not already created deployment user credentials, follow these steps: </p>

<ol>
<li><p>On the <strong>Quick Start</strong> management page, under the <strong>Publish your app</strong> heading, click <strong>Set up deployment credentials</strong>. This will display the <strong>Deployment Credentials</strong> dialog box. To generate user credentials for deployment, enter values for Username and Password, and then click the check mark.   </p>

<p><img src="..\Media\tshootdeploymentcredentials.png" alt="Create deployment credentials" /></p></li>
<li><p>Open the <strong>Dashboard</strong> management page for the web site. In the <strong>quick glance</strong> section, you can verify that the web site is configured to use the deployment user credentials that you generated.  Deployment user credentials for web sites are always specified using the syntax <strong>sitename\username</strong>:</p>

<p><img src="..\Media\tshootquickglanceborder.png" alt="Verify Deployment User" /></p></li>
<li><p>Click the link displayed under <strong>Site URL</strong> to verify that you can access an instance of the web site from your browser. You should see a web page similar to the following:</p>

<p><img src="..\Media\tshootUnderConstruction.png" alt="Web Site Under Construction page" /></p></li>
</ol>

<h2>Deploy the web site from the developer computer to Windows Azure</h2>

<p>Now that you have created a web site on Windows Azure and generated the necessary deployment user credentials, you can deploy the web site from your developer computer to Windows Azure.  To deploy a web site to Windows Azure using FTP, you can use one of several FTP clients available for download on the Internet. You can also deploy directly from your development environment if the application that you are using to create your web site supports FTP publishing. Since WebMatrix supports FTP publishing, follow these steps to publish the web site you created in WebMatrix to Windows Azure:</p>

<ol>
<li>Open the web site that you created with WebMatrix.</li>
<li><p>From the default view of the web site displayed in the WebMatrix IDE, click the <strong>Publish</strong> button to display the <strong>Publish Your Site</strong> window and click the <strong>Enter settings</strong> link under the <strong>I already have a hosted web site</strong>.</p>

<p><img src="..\Media\tshootPublishSettings.png" alt="WebMatrix Publish Settings" /></p></li>
<li><p id="pubsettings">Enter the following values in the <b>Publish Settings</b> dialog box:</p>

<ul>
<li><strong>Protocol:</strong>  Select <strong>FTP</strong></li>
<li><strong>Server:</strong>  Specify the URL listed under <strong>FTP Hostname</strong> on the web site's <strong>Dashboard</strong> management page.</li>
<li><strong>Site path:</strong> site/wwwroot</li>
<li><strong>User name:</strong> Specify the account listed under <strong>Deployment User</strong> on the web site's <strong>Dashboard</strong> management page.</li>
<li><strong>Password:</strong> Specify the password for the deployment user that you created for the web site.</li>
<li><strong>Destination URL:</strong> Specify the URL listed under <strong>Site URL</strong> on the web site's <strong>Dashboard</strong> management page. </li>
<li><strong>Save password:</strong> Check this option to save the deployment user password. </li>
<li><strong>Validate Connection:</strong> Click this to verify that WebMatrix can connect to the FTP host using the specified parameters.</li>
</ul></li>
<li><p>Click <strong>Save</strong> and a <strong>Publish Compatibility</strong> window is shown. Click <strong>Continue</strong> to perform the compatibility tests.</p>

<p><img src="..\Media\tshootPublishPreview2.png" alt="Publish Compatibility Window" /></p></li>
<li><p>Click the <strong>Continue</strong> button again to initiate deployment of the local web site to Windows Azure. WebMatrix will calculate what files have changed since the last time the web site was published (all of them since this is the first time the web site has been published to Windows Azure) and display a <strong>Publish Preview</strong> dialog box:</p>

<p><img src="..\Media\tshootPublishPreview.png" alt="WebMatrix Publish Preview" /></p></li>
<li><p>Select the checkbox next to the file StarterSite.sdf and click <strong>Continue</strong> to initiate deployment to Windows Azure. </p></li>
<li><p>After publishing is complete, click the link displayed under <strong>Site URL</strong> from the <strong>Dashboard</strong> management page to open the an instance of the web site from your browser. You should see a web page similar to the following:</p>

<p><img src="..\Media\tshootDefaultWebPage.png" alt="Web Site Published to Windows Azure" /></p></li>
</ol>

<h2>Enable diagnostics for the web site</h2>

<p>Enable diagnostics for web sites on the <strong>Configure</strong> management page. Under the <strong>Diagnostics</strong> section of the <strong>Configure</strong> management page, you can enable or disable the following logging and tracing options:</p>

<ul>
<li><strong>Web Server Logging</strong>  - Turn on Web Server logging to save web site logs using the W3C extended log file format.</li>
<li><strong>Detailed Error Messages</strong> - Turn on logging of detailed error messages to capture all errors generated by instances of the web site.</li>
<li><strong>Failed Request Tracing</strong> - Turn on failed request tracing to capture information for failed client requests.</li>
</ul>

<p>Set all logging and tracing options for the web site to <strong>On</strong> and click the <strong>Save</strong> icon at the bottom of the page. </p>

<h3><a name="verifyftpconnectivity"></a>Verify connectivity to the FTP site where log files are stored</h3>

<p>Connect to the FTP site where diagnostic data is stored using parameters from the web site's <strong>Dashboard</strong> management page. Open the FTP site listed under <strong>Diagnostics Logs</strong> using the <strong>Deployment User</strong> account credentials <a href="#deploymentuser">you created earlier</a>. Consider using an FTP client such as <a href="http://go.microsoft.com/fwlink/?LinkId=247914">FileZilla</a> to download log files. An FTP client typically provides more flexibility than a web browser for connnecting to and downloading files from an FTP site. </p>

<h2>Register an account on the web site</h2>

<p>Follow these steps to register an account on the web site:</p>

<ol>
<li><p>Open the web site from your browser and click <strong>Register</strong> in the top right corner of the default web page. You will be directed to registration page similar to the following:</p>

<p><img src="..\Media\tshootregisteracct.png" alt="Web site registration page" /></p></li>
<li><p>Enter an email address and password and click <strong>Register</strong>. After you register you will be redirected to the default web page and you will be logged on with the e-mail account that you specified on the registration page:</p>

<p><img src="..\Media\tshootloggedon.png" alt="Logged on to web site" /></p></li>
</ol>

<h2>Introduce an error condition on the web site</h2>

<p>Before downloading and analyzing diagnostic data from a web site, it will be useful to modify the web site to cause an error to occur. Follow the steps below to cause an error condition and configure the web site to display application errors.</p>

<h3><a name="breakregistration"></a>Rename the Web Site user account database file</h3>

<p>The web site is configured to store account registration information in the file <strong>StarterSite.sdf</strong>. To introduce an error condition on instances of the web site, rename the file <strong>StarterSite.sdf</strong> to <strong>StarterSite.bak</strong> on the deployed web site:</p>

<ol>
<li>On the <strong>Dashboard</strong> page for the web site, click the <strong>FTP Host Name</strong> under the <strong>Quick Glance</strong> section. This will start an instance of Internet Explorer. Press the ALT key and select the <strong>View</strong> menu. Next, select <strong>Open FTP site in Windows Explorer</strong>. </li>
<li>Navigate to the /site/wwwroot/App_Data/ directory,</li>
<li>Rename the file <strong>StarterSite.sdf</strong> to <strong>StarterSite.bak</strong>. After you rename the file, Windows Azure web sites will be unable to access the user account database, causing an error to occur whenever clients connect to instances of the web site. </li>
</ol>

<h3><a name="addwebconfig"></a>Configure the Web Site to display application errors</h3>

<p>The default <strong>mode</strong> of the ASP.NET <a href="http://go.microsoft.com/fwlink/?LinkId=251836">customErrors</a> configuration setting is <strong>RemoteOnly</strong>, which prevents application errors from being displayed. To configure the web site to display application errors, create a web.config file and set the <strong>mode</strong> attribute of <strong>customErrors</strong>  to <strong>Off</strong>:</p>

<ol>
<li><p>Open the web.config file located in the root directory of your web site. Open the file with Notepad (or any editor you like) and add the following XML inside the &lt;system.web&gt; elements:</p>

<pre><code>&lt;customErrors mode="Off"/&gt;
</code></pre>

<p>If you are unsure of the location of your web site, open WebMatrix and right-click AzureWebDiag and select <strong>Show in File Explorer</strong>.</p>

<div class="dev-callout"> 
<b>Note</b> 
<p>When an ASP.NET web site running on Windows Azure is not configured to display application errors, a web page similar to the following is displayed if an application error occurs:</p> </div>   

<p><img src="..\Media\tshootwebsiteerror1.png" alt="Generic Application Error" /></p></li>
</ol>

<h3><a name="viewwebsitevariables"></a>Display environment variables for a web site</h3>

<p>For purposes of troubleshooting it is may be useful to know the values of a web site's environment variables. To display environment variables for .NET or PHP web sites, first paste the following code into Notepad and then save to the web site root directory with the specified file names:</p>

<p><strong>environment.aspx</strong><br /></p>

<pre>
&lt;script language="C#" runat="server"&gt;
public void Page_Load(Object sender, EventArgs E)
{
    System.Collections.DictionaryEntry dictEntry = default(System.Collections.DictionaryEntry);
    Response.Write("&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;");
    Response.Write("&lt;table border=1&gt;");
    Response.Write("&lt;tr&gt;&lt;td colspan=2&gt;&lt;font color='red'&gt;Environment variables&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;");
    Response.Write("&lt;tr&gt;&lt;td&gt;Key&lt;/td&gt;&lt;td&gt;Value&lt;/td&gt;&lt;/tr&gt;");

    foreach (DictionaryEntry dictEntry_loopVariable in Environment.GetEnvironmentVariables())
    {
       dictEntry = dictEntry_loopVariable;
       Response.Write("&lt;tr&gt;&lt;td&gt;" + (dictEntry.Key.ToString()) + 
       "&lt;/td&gt;&lt;td&gt;" + (dictEntry.Value.ToString()) + "&lt;/td&gt;&lt;/tr&gt;");
    }
    Response.Write("&lt;/table&gt;&lt;br&gt;&lt;br&gt;");
    Response.Write("&lt;table border=1&gt;");
    Response.Write("&lt;tr&gt;&lt;td colspan=2&gt;&lt;font color='blue'&gt;Server Variables&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;");
    Response.Write("&lt;tr&gt;&lt;td&gt;Key&lt;/td&gt;&lt;td&gt;Value&lt;/td&gt;&lt;/tr&gt;");

    int loop1, loop2;
    NameValueCollection coll;

    // Load ServerVariable collection into NameValueCollection object.
    coll=Request.ServerVariables;

    // Get names of all keys into a string array. 
    String[] arr1 = coll.AllKeys;

    for (loop1 = 0; loop1 &lt; arr1.Length; loop1++) 
    {
        Response.Write("&lt;tr&gt;");
        Response.Write("&lt;td&gt;" + arr1[loop1] + "&lt;/td&gt;");
        String[] arr2=coll.GetValues(arr1[loop1]);

        for (loop2 = 0; loop2 &lt; arr2.Length; loop2++) 
        {
            Response.Write("&lt;td&gt;" + Server.HtmlEncode(arr2[loop2]) + "&lt;/td&gt;");
        }
        Response.Write("&lt;/tr&gt;");
    }
    Response.Write("&lt;/table&gt;");
}
&lt;/script&gt;
</pre>

<p><strong>environment.php</strong><br /></p>

<pre>
&lt;?php
echo "&lt;pre&gt;";
print_r($_SERVER);
echo "&lt;/pre&gt;";
?&gt;
</pre>

<p>When you add the file <strong>environment.aspx</strong> to a .NET web application or the file <strong>environment.php</strong> to a PHP web application, after you have deployed your web site to Windows Azure, you can browse to these files to view values assigned to a web site's environment variables.</p>

<h3><a name="deployerrortoazure"></a>Deploy the updated Web Site to Windows Azure</h3>

<ol>
<li><p>Click <strong>Publish</strong> in the WebMatrix IDE. WebMatrix will calculate any changes made to files since the last time you published and display the changes in a dialog box  similar to the following:</p>

<p><img src="..\Media\tshootPublishPreview2.png" alt="WebMatrix Publish Preview" /></p></li>
<li><p>To initiate transfer of these files to Windows Azure, click <strong>Continue</strong>. </p></li>
<li><p>After publishing is complete, click the link displayed under <strong>Site URL</strong> from the <strong>Dashboard</strong> management page to open the web site from your browser. You should see a web page similar to the following:   </p>

<p><a name="debugapperr"></a>
<img src="..\Media\tshootwebsiteerror2.png" alt="Detailed Application Error" /></p></li>
</ol>

<h2>Download diagnostic log files to your local computer</h2>

<p>Now that you have introduced an error condition on the web site, you can download the resulting diagnostic log files to your local computer for analysis. To ensure that web site diagnostics creates all of the log files specified under the <strong>Diagnostics</strong> section of the web site's <strong>Configure</strong> management page, refresh your browser once or twice to ensure that the error occurs.  Follow these steps to download the diagnostic log files to your local computer:</p>

<ol>
<li>Open the web site's <strong>Dashboard</strong> management page and make note of the FTP site listed under <strong>Diagnostics Logs</strong> and the account listed under <strong>Deployment User</strong>. The FTP site is where the log files are located and the account listed under Deployment User is used to authenticate to the FTP site.</li>
<li><p>Consider using an FTP client such as <a href="http://go.microsoft.com/fwlink/?LinkId=247914">FileZilla</a> to connect to the FTP site. An FTP client provides greater ease of use for specifying credentials and viewing folders on an FTP site than is typically possible with a browser. The screenshot below was taken from the FileZilla FTP client when connecting to the FTP site where the log files for the AzureWebDiag web site are stored. The FTP host name and deployment user credentials are highlighted in red. To copy the contents of the remote FTP folder on the right to the local folder on the left, click to select the folder on the left then right-click the folder on the right and select <strong>Download</strong> from the shortcut menu that is displayed:</p>

<p><img src="..\Media\tshootfilezilla.png" alt="FileZilla FTP Client" /></p></li>
<li><p>Open the folder on the left with Windows Explorer to access the log files that you downloaded:</p>

<p><img src="..\Media\tshootlogfiles.png" alt="View Log Files" /></p></li>
</ol>

<h2>Analyze web site log files</h2>

<p>Basic analysis of the different log file types can be performed as follows:</p>

<table cellpadding="0" cellspacing="0" width="655" rules="all" style="border: #000000 thin solid;">        
<tr style="background-color: silver; font-weight: bold;" valign="top">
<td style="width: 145px">Log File</td>
<td style="width: 510px">Analyze with</td>
</tr>
<tr valign="top">
<td>Detailed error logging</td>
<td>Open .htm files from the /LogFiles/DetailedErrors/ folder.</td>
</tr>                                                                                                                                                                                                                                                     
<tr valign="top">
<td>Failed request tracing</td>
<td>Open .xml files from the /LogFiles/W3SVC#########/ folder.</td>
</tr>
<tr valign="top">
<td>Web server logging</td>
<td>Use <a href="http://go.microsoft.com/fwlink/?LinkId=246619" title="Log Parser 2.2">Log Parser 2.2</a> to analyze .log files from the /LogFiles/http/RawLogs/ folder.</td>
</tr>
</table>

<h3><a name="detailederrors"></a>View results of detailed error logging</h3>

<p>Web site log files include formatting functionality for viewing Detailed Error logging results. Use a web browser to open any .htm file saved to the /LogFiles/DetailedErrors/ folder: </p>

<p><img src="..\Media\tshootdetailederrors.png" alt="View Detailed Errors" /></p>

<p>Detailed error logging results also include recommendations for resolving errors, including links to relevant Microsoft Knowledge base articles.</p>

<h3><a name="failedrequests"></a>View results of failed request tracing</h3>

<p>Web site log files provide formatting functionality for viewing failed request tracing results. Use a web browser to open any .xml file saved to the /LogFiles/W3SVC#########/ folder:</p>

<p><img src="..\Media\tshootfailedrequesttracing.png" alt="Failed Request Tracing" /></p>

<p>Failed request tracing for web site is based upon the failed request tracing functionality available with IIS 7.5. </p>

<h3><a name="webserverlogging"></a>Analyze web server logs</h3>

<p>Web site logs record all HTTP transactions using the W3C extended log file format and are saved to the /LogFiles/http/RawLogs/ folder. Web site logs can be analyzed using using  <a href="http://go.microsoft.com/fwlink/?LinkId=246619">Log Parser 2.2</a>:</p>

<p><img src="..\Media\tshootlogparser.png" alt="Log Parser Command Window" /></p>

<p>For more information about Log Parser 2.2 see <a href="http://go.microsoft.com/fwlink/?LinkId=251994">Download Log Parser 2.2</a></p>

<h2>Troubleshoot the AzureWebDiag web site</h2>

<p>This section describes how someone might engage in troubleshooting a web site using the information that is available after you configure the web site to display errors and enable web site tracing and logging.  </p>

<h3><a name="tshootwithloggingandtracing"></a>Using logging and tracing information to troubleshoot Web Site problems</h3>

<p>For purposes of troubleshooting the error caused by renaming the file startersite.sdf file to startersite.bak,  web server logging, detailed error messge logging, and failed request tracing do not provide a single definitive cause and resolution to the problem. The logging and tracing files did however rule out several  possible causes by clearly indicating that an HTTP Status code of <strong>500 Internal Server Error</strong> was generated on the web site when clients connected to it. This provides a high level of confidence that the problem is unrelated to unsuitable authorization headers (<strong>HTTP 401 Unauthorized</strong>),  bad request syntax (<strong>HTTP 400 Bad Request</strong>) or numerous other HTTP 3xx, 4xx and 5xx status codes. According to <a href="http://go.microsoft.com/fwlink/?LinkId=252804">HTTP 1.1 Status Definitions</a>, an HTTP Status code of <strong>500 Internal Server Error</strong> indicates that  "The server encountered an unexpected condition which prevented it from fulfilling the request".  </p>

<h3><a name="tshootwitherrormessages"></a>Using detailed web site errors to troubleshoot Web Site problems</h3>

<p>Additional troubleshooting should focus on the error messages displayed as a result of modifying the web.config file or possibly by analyzing the web site's environment variables.</p>

<p>If we look at the <a href="#debugapperr">detailed error message created on the web site</a> we can see that an unhandled exception was thrown by the following method call in Line 2 of the file _AppStart.cshtml:</p>

<pre>
WebSecurity.InitializeDatabaseConnection("StarterSite", "UserProfile", "UserId", "Email", true); 
</pre>

<p>The error's <strong>Description:</strong> is "An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code."</p>

<p><strong>Exception Details:</strong> listed for the error are "System.InvalidOperationException: Connection string "StarterSite" was not found."</p>

<p>If we examine the stack trace displayed under the error, we can see that the error originated from a call to the InitializeDatabaseConnection() method of the WebMatrix.WebData.WebSecurity class described at <a href="http://go.microsoft.com/fwlink/?LinkId=252805">WebSecurity.InitializeDatabaseConnection Method</a>.  </p>

<p>Because the InitializeDatabaseConnection Method is only using 5 parameters, we determine that the overloaded InitializeDatabaseConnection() method described in the topic <a href="http://go.microsoft.com/fwlink/?LinkId=252806">WebSecurity.InitializeDatabaseConnection Method (String, String, String, String, Boolean)</a> is being called.</p>

<p>Because the Exception details indicate that 'Connection string "StarterSite" was not found', we can have a look at the definition for the <strong>connectionStringname</strong> parameter:</p>

<p><strong>connectionStringName</strong>
Type: System.String<br />
The name of the connection string for the database that contains user information. If you are using SQL Server Compact,  this can be the name of the database file (.sdf file) without the .sdf file name extension.</p>

<p>This parameter definition provides a clue as to the cause of the error.  According to <a href="http://go.microsoft.com/fwlink/?LinkId=208661">Connecting to a SQL Server or MySQL Database in WebMatrix</a>, "WebMatrix includes SQL Server Compact, which is a lightweight version of Microsoft SQL Server that lets you create databases for your web sites. When you create a database, <strong>it's added as an .sdf file in the App_Data folder of your web site.</strong>" Since this web site <em>does</em> use SQL Server Compact and the value specified for the connectionStringName parameter is <strong>StarterSite</strong>, the InitializeDatabaseConnection() method is looking for the file StarterSite.sdf in the web site's \root\App_Data\ directory.  </p>

<p>Checking the web site's \root\App_Data\ directory, we can verify that there is no file named StarterSite.sdf because we renamed it to StarterSite.bak. After renaming this file back to startersite.sdf, the InitializeDatabaseConnection() method finds the file that it was expecting, and the web site works as expected. </p>

<h3>Next Steps</h3>

<ul>
<li><a href="http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/">ASP.NET MVC web site with SQL Database</a></li>
<li><a href="http://www.windowsazure.com/en-us/develop/net/tutorials/website-with-webmatrix/">Create and deploy a web site with WebMatrix</a></li>
<li><a href="http://www.windowsazure.com/en-us/develop/net/tutorials/website-from-gallery/">Create a web site from the gallery</a></li>
<li><a href="http://www.windowsazure.com/en-us/develop/net/tutorials/website-with-mongodb-vm/">Web site with MongoDB on a virtual machine</a></li>
</ul>
    </body>
</html>
